/*!
 * GentleForm - v0.0.0
 * Validate forms at the right time, using browser's native api.
 * https://github.com/Zhouzi/GentleForm
 *
 * @author Gabin Aureche
 * @license MIT
 */

!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.GentleForm=e():t.GentleForm=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),u=r(o),f=n(15),s=r(f),l={},d=function(){function t(e,n){var r=this;i(this,t);var a=this.$form=u["default"](e);this.onSubmit="function"==typeof n?n:function(){},a.on("change",function(t){var e=u["default"](t.target),n=e.attr("type");"input"!=e.prop("tagName")||["checkbox","radio"].indexOf(n)<0||(e.add(r.$form).setState("dirty",!0,r.$form),r.validate(e))}).on("blur",function(t){var e=u["default"](t.target);if(!s["default"](e)){var n=e.getState("dirty");e.add(r.$form).setState("touched",!0,r.$form),n&&e.setState("interacted",!0,r.$form),r.validate(e)}}).on("input",function(t){var e=u["default"](t.target);e.add(r.$form).setState("dirty",!0,r.$form),r.validate(e)}).on("submit",function(t){r.$form.setState("submitted",!0,r.$form);var e=r.$form.validity(),n=e.children,i={},a=void 0;n.forEach(function(t){a=u["default"](t.element),a.setState("submitted",!0,r.$form),r.validate(a),i[a.attr("name")]={validity:t.validity,value:a.val()}}),r.validate(r.$form,!0),r.onSubmit(t,e.valid,i)}),u["default"]("[data-gentle-include]").each(function(t){var e=u["default"](t),n=e.attr("data-gentle-include");"string"!=typeof l[n]&&(l[n]=u["default"]("#"+n).text()),e.html(e.html()+l[n])}),u["default"]("[data-gentle-errors-when]",this.$form).hide()}return a(t,[{key:"validate",value:function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];t.each(function(t){var r=u["default"](t),i=r.prop("tagName");if(("form"!=i||r.getState("submitted"))&&(r.getState("interacted")||r.getState("submitted"))){r.checkValidity()?r.setState("invalid",!1,e.$form).setState("valid",!0,e.$form):("form"!=i||n)&&r.setState("invalid",!0,e.$form).setState("valid",!1,e.$form);var a=r.getErrors(),o=u["default"]('[data-gentle-errors-for="'+r.attr("name")+'"]',e.$form),f=void 0;o.each(function(t){for(var e in a)a.hasOwnProperty(e)&&(f=u["default"]('[data-gentle-errors-when="'+e+'"]',t),a[e]?("form"!=i||n)&&f.show():f.hide())})}})}}]),t}();e["default"]=d,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),a=r(i),o=n(3),u=r(o);n(4),n(5),n(6),n(7),n(8),n(9),n(12),n(13),n(14),u["default"].fn.show=function(){return this.aria("hidden",!1).removeClass("gentle-hide"),this},u["default"].fn.hide=function(){return this.aria("hidden",!0).addClass("gentle-hide"),this},u["default"].fn.setState=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?document:arguments[2];if(void 0===e)throw"No stateValue passed to $.setState()";this.each(function(n){n.gentleState||(n.gentleState={}),n.gentleState[t]=e});var r="gentle-state-"+t,i=new a["default"]('[data-gentle-state-for="'+this.attr("name")+'"]',n);return"invalid"==t&&this.aria("invalid",e),e?(this.addClass(r),i.addClass(r)):(this.removeClass(r),i.removeClass(r)),this},u["default"].fn.getState=function(t){var e=this.get(0);return e.gentleState?e.gentleState[t]:null},u["default"].fn.getErrors=function(){var t=this.validity(),e={invalid:!t.valid};for(var n in t)t.hasOwnProperty(n)&&"valid"!=n&&(e[n]=t[n]);return e},e["default"]=a["default"],t.exports=e["default"]},function(t,e,n){var r,i;r=[n(3)],i=function(t){return function(e,n){return new t(e,n)}}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[],i=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?document:arguments[1];n instanceof t&&(n=n.get(0)),e instanceof t?this._elements=e.get():"string"==typeof e?this._elements=[].slice.call(n.querySelectorAll(e)):e instanceof Array?this._elements=e:this._elements=[e]}return t.fn=t.prototype={constructor:t,get:function(t){return void 0===t?this._elements:this._elements[t]},each:function(t){return this._elements.forEach(t),this},add:function(e,n){return this._elements=this._elements.concat(new t(e,n).get()),this}},t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(3)],i=function(t){return t.fn.on=function(t,e){var n=t.replace(/\s/g,"").split(",");return this.each(function(t){n.forEach(function(n){t.addEventListener(n,e,["focus","blur"].indexOf(n)>-1)})})},t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(3)],i=function(t){return t.fn.addClass=function(t){return this.each(function(e){e.classList.add(t)}),this},t.fn.removeClass=function(t){return this.each(function(e){e.classList.remove(t)}),this},t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(3)],i=function(t){return t.fn.html=function(t){return void 0!==t?(this.each(function(e){e.innerHTML=t}),this):this.get(0).innerHTML},t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(3)],i=function(t){return t.fn.hasAttr=function(t){return this.get(0).hasAttribute(t)},t.fn.attr=function(t,e){return void 0!==e?(this.each(function(n){n.setAttribute(t,e)}),this):this.get(0).getAttribute(t)},t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(3)],i=function(t){return t.fn.checked=function(t){return void 0!==t?(this.each(function(e){e.checked=!!t}),this):this.get(0).checked},t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(3),n(10),n(11)],i=function(t){return t.fn.validators=[{name:"valueMissing",attribute:"required",isInvalid:function(e){var n=e.attr("type");if("checkbox"==n)return!e.checked();if("radio"!=n)return e.val().length<=0;var r=e.attr("name");if("string"!=typeof r)return!1;for(var i=new t('[type="radio"][name="'+r+'"]').get(),a=0,o=i.length;o>a;a++)if(new t(i[a]).checked())return!1;return!0}},{name:"patternMismatch",attribute:"pattern",isInvalid:function(t){return!new RegExp(t.attr("pattern")).test(t.val())}},{name:"rangeOverflow",attribute:"max",isInvalid:function(t){return t.val()>t.attr("max")}},{name:"rangeUnderflow",attribute:"min",isInvalid:function(t){return t.val()<t.attr("min")}},{name:"tooShort",attribute:"minlength",isInvalid:function(t){return t.val().length<t.attr("minlength")}},{name:"tooLong",attribute:"maxlength",isInvalid:function(t){return t.val().length>t.attr("maxlength")}},{name:"typeMismatch",attribute:"type",isInvalid:function(t){var e=t.attr("type");return"email"==e?!/[^\s]+@[^\s]+/.test(t.val()):"number"==e?/[^0-9]/g.test(t.val()):"url"==e?!/(http|ftp)s?:\/\//.test(t.val()):!1}},{name:"customError"},{name:"stepMismatch"}],t.fn.checkValidity=function(){return this.validity().valid},t.fn.validity=function(){var e=this,n=void 0;if("form"==this.prop("tagName")){var r=function(){var r=e.formChildren();n={valid:!0,children:[]};var i=void 0,a=void 0;return r.forEach(function(e){if(a=new t(e),["button","submit"].indexOf(a.attr("type"))<0&&"button"!=a.tagName){i=new t(e).validity(),n.children.push({element:e,validity:i});for(var r in i)i.hasOwnProperty(r)&&(void 0===n[r]&&(n[r]=i[r]),"valid"==r?i[r]===!1&&(n.valid=!1):i[r]===!0&&(n[r]=!0))}}),{v:n}}();if("object"==typeof r)return r.v}n=this.get(0).validity||{};var i={valid:!0};return this.validators.forEach(function(t){var r=!1;i.valid?void 0!==n[t.name]?r=i[t.name]=n[t.name]:"function"==typeof t.isInvalid?r=i[t.name]=t.isInvalid(e):i[t.name]=!1:i[t.name]=!1,r&&(i.valid=!1)}),i},t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(3)],i=function(t){return t.fn.prop=function(t,e){if(void 0!==e)return this.each(function(n){n[t]=e}),this;var n=this.get(0)[t];return"tagName"==t?n.toLowerCase():n},t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(3),n(10)],i=function(t){return t.fn.formChildren=function(){if("form"!==this.prop("tagName"))throw new Error('.formChildren expected element to be a <form> but got "'+this.prop("tagName")+'"');for(var t=this.get(0),e=[],n=0,r=t.length;r>n;n++)e.push(t[n]);return e},t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(3)],i=function(t){return t.fn.val=function(t){return void 0!==t?(this.each(function(e){e.value=t}),this):this.get(0).value},t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(3),n(7)],i=function(t){return t.fn.aria=function(t,e){return this.attr("aria-"+t,e)},t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e,n){var r,i;r=[n(3)],i=function(t){return t.fn.text=function(t){return void 0!==t?(this.each(function(e){e.textContent=t}),this):this.get(0).textContent},t}.apply(e,r),!(void 0!==i&&(t.exports=i))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){return"button"==t.prop("tagName")||["button","submit"].indexOf(t.attr("type"))>-1},t.exports=e["default"]}])});