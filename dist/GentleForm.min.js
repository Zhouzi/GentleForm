/*!
 * GentleForm - v0.0.0
 * Validate a form at the right time, using browser's native api.
 * https://github.com/Zhouzi/GentleForm
 *
 * @author Gabin Aureche
 * @license MIT
 */

!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.GentleForm=e():t.GentleForm=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),u=r(o),s=n(2),l=r(s),f=function(){function t(e,n){a(this,t);var r=this;r.$form=u["default"](e),r.onSubmit="function"==typeof n?n:function(){},r.$form.on("blur",function(t){var e=u["default"](t.target);if(l["default"](e)){var n=e.getState("dirty");e.concat(r.$form).setState("touched",!0,r.$form),n&&e.setState("interacted",!0,r.$form),r.validate(e)}}).on("input",function(t){var e=u["default"](t.target);e.concat(r.$form).setState("dirty",!0,r.$form),r.validate(e)}).on("submit",function(t){t.preventDefault(),r.$form.setState("submitted",!0,r.$form);for(var e={},n=0,a=r.$form.get(0),i=a.length,o=void 0,s=void 0;i>n;n++)o=u["default"](a[n]),l["default"](o)&&(o.setState("submitted",!0,r.$form),r.validate(o),s=o.getAttr("name"),e[s]={errors:o.getErrors(),value:o.getValue()});r.validate(r.$form,!0),r.onSubmit(t,r.$form.isValid(),e)}),u["default"]("[data-gentle-error-when]",r.$form).hide()}return i(t,[{key:"validate",value:function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=this;t.each(function(t){var a=u["default"](t),i=a.get(0).tagName.toLowerCase();if(("form"!=i||a.getState("submitted"))&&(a.getState("interacted")||a.getState("submitted"))){a.isValid()?a.setState("invalid",!1,r.$form).setState("valid",!0,r.$form):("form"!=i||n)&&a.setState("invalid",!0,r.$form).setState("valid",!1,r.$form);var o=a.getErrors(),s=u["default"]('[data-gentle-errors-for="'+a.getAttr("name")+'"]',e.$form),l=void 0;s.each(function(t){for(var e in o)o.hasOwnProperty(e)&&(l=u["default"]('[data-gentle-error-when="'+e+'"',t),o[e]?("form"!=i||n)&&l.show():l.hide())})}})}}]),t}();e["default"]=f,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e){var r=arguments.length<=1||void 0===arguments[1]?document:arguments[1];n(this,t),e instanceof t?this.elements=e.get():"string"==typeof e?(r instanceof t&&(r=r.get(0)),this.elements=[].slice.call(r.querySelectorAll(e))):e instanceof Array?this.elements=e:this.elements=[e]}return r(t,[{key:"get",value:function(t){return void 0===t?this.elements:this.elements[t]}},{key:"each",value:function(t){return this.elements.forEach(t),this}},{key:"on",value:function(t,e){return this.each(function(n){n.addEventListener(t,e,["focus","blur"].indexOf(t)>-1)}),this}},{key:"addClass",value:function(t){return this.each(function(e){e.classList.add(t)}),this}},{key:"removeClass",value:function(t){return this.each(function(e){e.classList.remove(t)}),this}},{key:"show",value:function(){return this.removeClass("gentle-hide"),this}},{key:"hide",value:function(){return this.addClass("gentle-hide"),this}},{key:"getAttr",value:function(t){return this.get(0).getAttribute(t)}},{key:"setAttr",value:function(t,e){return this.each(function(n){n.setAttribute(t,e)}),this}},{key:"concat",value:function(e,n){return this.elements=this.elements.concat(new t(e,n).get()),this}},{key:"setState",value:function(e,n){var r=arguments.length<=2||void 0===arguments[2]?document:arguments[2];if(void 0===n)throw"No stateValue passed to $.setState()";this.each(function(t){t.gentleState||(t.gentleState={}),t.gentleState[e]=n});var a="gentle-state-"+e,i=new t('[data-gentle-state-for="'+this.getAttr("name")+'"]',r);return n?(this.addClass(a),i.addClass(a)):(this.removeClass(a),i.removeClass(a)),this}},{key:"getState",value:function(t){var e=this.get(0);return e.gentleState?e.gentleState[t]:null}},{key:"getValue",value:function(){return this.get(0).value}},{key:"isValid",value:function(){return this.get(0).checkValidity()}},{key:"getErrors",value:function(){var t=this.get(0),e={};for(var n in t.validity)"valid"==n?e.invalid=!t.validity.valid:e[n]=t.validity[n];return"boolean"!=typeof e.invalid&&(e.invalid=!t.checkValidity()),e}}]),t}();e["default"]=function(t,e){return new a(t,e)},t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){return"button"!=t.get(0).tagName&&["button","submit"].indexOf(t.getAttr("type"))<0},t.exports=e["default"]}])});