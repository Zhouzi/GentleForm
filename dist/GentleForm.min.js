/*!
 * GentleForm - v0.0.0
 * Validate forms at the right time, using browser's native api.
 * https://github.com/Zhouzi/GentleForm
 *
 * @author Gabin Aureche
 * @license MIT
 */

!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.GentleForm=e():t.GentleForm=e()}(this,function(){return function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return t[a].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=n(1),u=a(o),s=n(2),l=a(s),f={},c=function(){function t(e,n){r(this,t);var a=this;a.$form=u["default"](e),a.onSubmit="function"==typeof n?n:function(){},a.$form.on("focus, mouseup",function(t){var e=u["default"](t.target);"input"!=e.tagName()||["checkbox","radio"].indexOf(e.getAttr("type"))<0||setTimeout(function(){"radio"==e.getAttr("type")?u["default"]('[name="'+e.getAttr("name")+'"]').each(function(t){u["default"](t,a.$form).aria("checked",t.checked)}):e.aria("checked",e.get(0).checked),e.concat(a.$form).setState("dirty",!0,a.$form),a.validate(e)},0)}).on("blur",function(t){var e=u["default"](t.target);if(l["default"](e)){var n=e.getState("dirty");e.concat(a.$form).setState("touched",!0,a.$form),n&&e.setState("interacted",!0,a.$form),a.validate(e)}}).on("input",function(t){var e=u["default"](t.target);e.concat(a.$form).setState("dirty",!0,a.$form),a.validate(e)}).on("submit",function(t){a.$form.setState("submitted",!0,a.$form);for(var e={},n=0,r=a.$form.get(0),i=r.length,o=void 0,s=void 0;i>n;n++)o=u["default"](r[n]),l["default"](o)&&(o.setState("submitted",!0,a.$form),a.validate(o),s=o.getAttr("name"),e[s]={errors:o.getErrors(),value:o.getValue()});a.validate(a.$form,!0),a.onSubmit(t,a.$form.isValid(),e)}),u["default"]("[data-gentle-include]").each(function(t){var e=u["default"](t),n=e.getAttr("data-gentle-include");"string"!=typeof f[n]&&(f[n]=u["default"]("#"+n).textContent()),e.html(e.html()+f[n])}),u["default"]("[data-gentle-errors-when]",a.$form).hide()}return i(t,[{key:"validate",value:function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],a=this;t.each(function(t){var r=u["default"](t),i=r.get(0).tagName.toLowerCase();if(("form"!=i||r.getState("submitted"))&&(r.getState("interacted")||r.getState("submitted"))){r.isValid()?r.setState("invalid",!1,a.$form).setState("valid",!0,a.$form):("form"!=i||n)&&r.setState("invalid",!0,a.$form).setState("valid",!1,a.$form);var o=r.getErrors(),s=u["default"]('[data-gentle-errors-for="'+r.getAttr("name")+'"]',e.$form),l=void 0;s.each(function(t){for(var e in o)o.hasOwnProperty(e)&&(l=u["default"]('[data-gentle-errors-when="'+e+'"',t),o[e]?("form"!=i||n)&&l.show():l.hide())})}})}}]),t}();e["default"]=c,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),r=function(){function t(e){var a=arguments.length<=1||void 0===arguments[1]?document:arguments[1];n(this,t),e instanceof t?this.elements=e.get():"string"==typeof e?(a instanceof t&&(a=a.get(0)),this.elements=[].slice.call(a.querySelectorAll(e))):e instanceof Array?this.elements=e:this.elements=[e]}return a(t,[{key:"get",value:function(t){return void 0===t?this.elements:this.elements[t]}},{key:"each",value:function(t){return this.elements.forEach(t),this}},{key:"on",value:function(t,e){var n=t.replace(/\s/g,"").split(",");return this.each(function(t){n.forEach(function(n){t.addEventListener(n,e,["focus","blur"].indexOf(n)>-1)})}),this}},{key:"addClass",value:function(t){return this.each(function(e){e.classList.add(t)}),this}},{key:"removeClass",value:function(t){return this.each(function(e){e.classList.remove(t)}),this}},{key:"show",value:function(){return this.aria("hidden",!1).removeClass("gentle-hide"),this}},{key:"hide",value:function(){return this.aria("hidden",!0).addClass("gentle-hide"),this}},{key:"getAttr",value:function(t){return this.get(0).getAttribute(t)}},{key:"setAttr",value:function(t,e){return this.each(function(n){n.setAttribute(t,e)}),this}},{key:"concat",value:function(e,n){return this.elements=this.elements.concat(new t(e,n).get()),this}},{key:"setState",value:function(e,n){var a=arguments.length<=2||void 0===arguments[2]?document:arguments[2];if(void 0===n)throw"No stateValue passed to $.setState()";this.each(function(t){t.gentleState||(t.gentleState={}),t.gentleState[e]=n});var r="gentle-state-"+e,i=new t('[data-gentle-state-for="'+this.getAttr("name")+'"]',a);return"invalid"==e&&this.aria("invalid",n),n?(this.addClass(r),i.addClass(r)):(this.removeClass(r),i.removeClass(r)),this}},{key:"getState",value:function(t){var e=this.get(0);return e.gentleState?e.gentleState[t]:null}},{key:"getValue",value:function(){return this.get(0).value}},{key:"isValid",value:function(){return this.get(0).checkValidity()}},{key:"getErrors",value:function(){var t=this.get(0),e={};for(var n in t.validity)"valid"==n?e.invalid=!t.validity.valid:e[n]=t.validity[n];return"boolean"!=typeof e.invalid&&(e.invalid=!t.checkValidity()),e}},{key:"textContent",value:function(){return this.elements.length?this.get(0).textContent:""}},{key:"html",value:function(t){return"string"==typeof t?(this.each(function(e){e.innerHTML=t}),this):this.get(0).innerHTML}},{key:"tagName",value:function(){return this.elements.length?this.get(0).tagName.toLowerCase():""}},{key:"aria",value:function(t,e){return this.setAttr("aria-"+t,e),this}}]),t}();e["default"]=function(t,e){return new r(t,e)},t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){return"button"!=t.get(0).tagName&&["button","submit"].indexOf(t.getAttr("type"))<0},t.exports=e["default"]}])});